<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AI Assistant Configuration</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      max-width: 500px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      margin-top: 0;
      color: #333;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: 600;
      color: #555;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ddd;
      border-radius: 5px;
      box-sizing: border-box;
      font-size: 14px;
    }
    button {
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      background: #007AFF;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }
    button:active {
      background: #0051D5;
    }
    .info {
      background: #e8f4fd;
      padding: 10px;
      border-radius: 5px;
      margin-top: 15px;
      font-size: 13px;
      color: #333;
    }
    .info a {
      color: #007AFF;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>âŒš AI Assistant Setup</h1>
    
    <label for="api-provider">AI Provider</label>
    <select id="api-provider">
      <option value="claude">Claude (Anthropic)</option>
      <option value="openai">OpenAI (GPT)</option>
      <option value="gemini">Google Gemini</option>
    </select>
    
    <label for="api-key">API Key</label>
    <input type="password" id="api-key" placeholder="Enter your API key">
    
    <div class="info" id="api-info">
      Get your API key from <a href="https://console.anthropic.com" target="_blank">console.anthropic.com</a>
    </div>
    
    <label for="max-length">Max Response Length</label>
    <select id="max-length">
      <option value="300">Short (300 chars)</option>
      <option value="450" selected>Medium (450 chars)</option>
      <option value="600">Long (600 chars)</option>
    </select>
    
    <button id="save-btn">Save Configuration</button>
  </div>

  <script>
    // Update info text based on provider
    document.getElementById('api-provider').addEventListener('change', function() {
      var provider = this.value;
      var infoDiv = document.getElementById('api-info');
      
      if (provider === 'claude') {
        infoDiv.innerHTML = 'Get your API key from <a href="https://console.anthropic.com" target="_blank">console.anthropic.com</a>';
      } else if (provider === 'openai') {
        infoDiv.innerHTML = 'Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a>';
      } else if (provider === 'gemini') {
        infoDiv.innerHTML = 'Get your API key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a>';
      }
    });

    // Load saved configuration
    var savedConfig = localStorage.getItem('pebble-ai-config');
    if (savedConfig) {
      try {
        var config = JSON.parse(savedConfig);
        document.getElementById('api-provider').value = config.provider || 'claude';
        document.getElementById('api-key').value = config.apiKey || '';
        document.getElementById('max-length').value = config.maxLength || '450';
      } catch (e) {
        console.log('Error loading config');
      }
    }

    // Save button
    document.getElementById('save-btn').addEventListener('click', function() {
      var config = {
        provider: document.getElementById('api-provider').value,
        apiKey: document.getElementById('api-key').value,
        maxLength: parseInt(document.getElementById('max-length').value)
      };
      
      if (!config.apiKey) {
        alert('Please enter an API key');
        return;
      }
      
      // Save to localStorage
      localStorage.setItem('pebble-ai-config', JSON.stringify(config));
      
      // Return to Pebble app
      var location = 'pebblejs://close#' + encodeURIComponent(JSON.stringify(config));
      document.location = location;
    });
  </script>
</body>
</html>
